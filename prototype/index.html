<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kansai Solo Dining: Complete Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans Thai', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%;
            height: 250px;
        }

        .card-hover {
            transition: all 0.2s ease-in-out;
        }

        .card-hover:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            border-color: #cbd5e1;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.125rem 0.5rem;
            border-radius: 9999px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        /* Custom Scrollbar for list */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scroll::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .custom-scroll::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }

        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>
    <!-- Chosen Palette: "Modern Clean" - Slate/White background, Indigo primary, with semantic colors for tags (Red=Buffet, Green=AlaCarte). -->
    <!-- Application Structure Plan:
         1. Top Bar: Global Exchange Rate setting & Total Count.
         2. Filter Sidebar (Desktop) / Dropdown (Mobile): Robust filtering logic.
         3. Main Content: Grid of cards.
         4. Analytics: Simplified visual summary at the top.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>

<body class="min-h-screen flex flex-col md:flex-row">

    <!-- Mobile Header & Controls -->
    <div class="md:hidden bg-white border-b p-4 sticky top-0 z-50 shadow-sm">
        <div class="flex justify-between items-center mb-4">
            <h1 class="text-lg font-bold text-slate-800">üáØüáµ Kansai Solo Dining</h1>
            <span class="text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded-md font-bold">100¬• = 20‡∏ø</span>
        </div>
        <button onclick="document.getElementById('mobile-filters').classList.toggle('hidden')"
            class="w-full bg-slate-100 text-slate-700 py-2 rounded-lg font-medium text-sm flex justify-center items-center">
            <span>‚öôÔ∏è ‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á / ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</span>
        </button>
        <div id="mobile-filters" class="hidden mt-4 space-y-3 pb-2 border-b">
            <!-- Mobile filters inserted via JS logic or simplified duplicate -->
            <p class="text-xs text-center text-gray-400">‡πÇ‡∏õ‡∏£‡∏î‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ Desktop
                ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏ß‡πà‡∏≤</p>
        </div>
    </div>

    <!-- Sidebar (Desktop) / Filter Panel -->
    <aside
        class="w-full md:w-72 bg-white border-r border-slate-200 flex-shrink-0 md:h-screen md:sticky md:top-0 overflow-y-auto hidden md:block p-6">
        <div class="mb-8">
            <h1 class="text-2xl font-bold text-slate-800 tracking-tight">Kansai<br><span class="text-indigo-600">Solo
                    Dining</span></h1>
            <p class="text-xs text-slate-500 mt-2">‡∏£‡∏ß‡∏°‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡πá‡∏î ‡πÇ‡∏≠‡∏ã‡∏≤‡∏Å‡πâ‡∏≤-‡πÄ‡∏Å‡∏µ‡∏¢‡∏ß‡πÇ‡∏ï<br>‡∏â‡∏ö‡∏±‡∏ö‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô</p>
        </div>

        <div class="space-y-6">
            <!-- Filter: City -->
            <div>
                <label class="block text-xs font-bold text-slate-400 uppercase mb-2">‡πÄ‡∏°‡∏∑‡∏≠‡∏á (City)</label>
                <div class="space-y-2">
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="radio" name="city" value="all" checked onchange="applyFilters()"
                            class="text-indigo-600 focus:ring-indigo-500">
                        <span class="text-sm text-slate-700">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="radio" name="city" value="Osaka" onchange="applyFilters()"
                            class="text-indigo-600 focus:ring-indigo-500">
                        <span class="text-sm text-slate-700">‡πÇ‡∏≠‡∏ã‡∏≤‡∏Å‡πâ‡∏≤ (Osaka)</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="radio" name="city" value="Kyoto" onchange="applyFilters()"
                            class="text-indigo-600 focus:ring-indigo-500">
                        <span class="text-sm text-slate-700">‡πÄ‡∏Å‡∏µ‡∏¢‡∏ß‡πÇ‡∏ï (Kyoto)</span>
                    </label>
                </div>
            </div>

            <!-- Filter: Type -->
            <div>
                <label class="block text-xs font-bold text-slate-400 uppercase mb-2">‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö (Style)</label>
                <select id="filter-style" onchange="applyFilters()"
                    class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-200">
                    <option value="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                    <option value="Buffet">‡∏ö‡∏∏‡∏ü‡πÄ‡∏ü‡πà‡∏ï‡πå (Buffet)</option>
                    <option value="AlaCarte">‡∏à‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß (A La Carte)</option>
                </select>
            </div>

            <!-- Filter: Cuisine -->
            <div>
                <label class="block text-xs font-bold text-slate-400 uppercase mb-2">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≤‡∏´‡∏≤‡∏£</label>
                <select id="filter-cuisine" onchange="applyFilters()"
                    class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-200">
                    <option value="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                    <option value="Yakiniku">‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á (Yakiniku)</option>
                    <option value="Sushi">‡∏ã‡∏π‡∏ä‡∏¥ (Sushi)</option>
                    <option value="Fried">‡∏Ç‡∏≠‡∏á‡∏ó‡∏≠‡∏î (Tempura/Kushikatsu)</option>
                    <option value="Ramen">‡∏£‡∏≤‡πÄ‡∏°‡∏á (Ramen)</option>
                    <option value="Rice">‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ (Rice Bowl)</option>
                    <option value="Izakaya">‡∏≠‡∏¥‡∏ã‡∏≤‡∏Å‡∏≤‡∏¢‡∏∞ (Izakaya)</option>
                </select>
            </div>

            <!-- Filter: Alcohol -->
            <div>
                <label class="block text-xs font-bold text-slate-400 uppercase mb-2">‡πÅ‡∏≠‡∏•‡∏Å‡∏≠‡∏Æ‡∏≠‡∏•‡πå</label>
                <select id="filter-alcohol" onchange="applyFilters()"
                    class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-200">
                    <option value="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                    <option value="Nomihodai">‡∏°‡∏µ‡∏ö‡∏∏‡∏ü‡πÄ‡∏ü‡πà‡∏ï‡πå‡πÄ‡∏Å‡πä‡∏Å‡∏Æ‡∏ß‡∏¢ (Nomihodai)</option>
                    <option value="PayPerGlass">‡∏™‡∏±‡πà‡∏á‡πÅ‡∏¢‡∏Å‡πÅ‡∏Å‡πâ‡∏ß</option>
                </select>
            </div>

            <!-- Sort -->
            <div>
                <label class="block text-xs font-bold text-slate-400 uppercase mb-2">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö</label>
                <select id="sort-price" onchange="applyFilters()"
                    class="w-full text-sm border-slate-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-200">
                    <option value="low">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å‡∏™‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô</option>
                    <option value="high">‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏û‡∏á‡∏™‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô</option>
                </select>
            </div>

            <div class="pt-4 border-t border-slate-100">
                <div class="text-xs text-slate-400 mb-1">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô (Rate)</div>
                <div class="font-mono font-bold text-slate-600">0.20 THB / JPY</div>
            </div>
        </div>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-grow p-4 md:p-8 overflow-y-auto h-screen custom-scroll bg-slate-50">

        <!-- Dashboard Widgets -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
            <!-- Widget 1: Count -->
            <div
                class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 flex flex-col justify-center items-center text-center">
                <div class="text-4xl font-black text-indigo-600" id="display-count">0</div>
                <div class="text-sm text-slate-500 font-medium">‡∏£‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç</div>
            </div>

            <!-- Widget 2: Price Analysis Chart -->
            <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 col-span-1 lg:col-span-2">
                <h3 class="text-xs font-bold text-slate-400 uppercase mb-2">‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ (‡∏ö‡∏≤‡∏ó) ‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</h3>
                <div class="chart-container" style="height: 150px;">
                    <canvas id="priceChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Restaurant Grid -->
        <div id="grid-container" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 pb-20">
            <!-- Cards will be injected here -->
        </div>

    </main>

    <script>
        // --- DATASET: RECOVERED & EXPANDED ---
        const restaurants = [
            // --- YAKINIKU (‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á) ---
            {
                id: 1, name: "Yakiniku Rikimaru", city: "Osaka", cuisine: "Yakiniku", style: "Buffet",
                price: 3500, alcohol: { type: "Nomihodai", price: 1300 },
                solo: 5, desc: "‡∏£‡πâ‡∏≤‡∏ô‡∏î‡∏±‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡πÉ‡∏à‡∏Ñ‡∏ô‡πÑ‡∏ó‡∏¢ ‡∏°‡∏µ‡πÄ‡∏°‡∏ô‡∏π‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ ‡∏™‡∏±‡πà‡∏á‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏ó‡πá‡∏ö‡πÄ‡∏•‡πá‡∏ï‡∏á‡πà‡∏≤‡∏¢‡∏°‡∏≤‡∏Å ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏Ñ‡∏∏‡πâ‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤",
                tags: ["Namba", "Umeda", "‡πÄ‡∏ï‡∏≤‡∏ñ‡πà‡∏≤‡∏ô"]
            },
            {
                id: 2, name: "Chifaja", city: "Kyoto", cuisine: "Yakiniku", style: "Buffet",
                price: 3300, alcohol: { type: "Nomihodai", price: 1100 },
                solo: 4, desc: "‡∏ö‡∏∏‡∏ü‡πÄ‡∏ü‡πà‡∏ï‡πå‡πÄ‡∏Å‡πà‡∏≤‡πÅ‡∏Å‡πà‡πÉ‡∏ô‡πÄ‡∏Å‡∏µ‡∏¢‡∏ß‡πÇ‡∏ï ‡∏™‡∏≤‡∏Ç‡∏≤ Kawaramachi ‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡πÅ‡∏ö‡∏ö‡∏Å‡∏∂‡πà‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß",
                tags: ["Kawaramachi", "‡∏£‡∏≤‡∏Ñ‡∏≤‡∏î‡∏µ", "Local"]
            },
            {
                id: 3, name: "Aburiya", city: "Osaka", cuisine: "Yakiniku", style: "Buffet",
                price: 4400, alcohol: { type: "Nomihodai", price: 1650 },
                solo: 3, desc: "‡πÄ‡∏Å‡∏£‡∏î‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏´‡∏ô‡πà‡∏≠‡∏¢ ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏° ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏•‡∏≤‡∏¢‡∏™‡∏ß‡∏¢ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏à‡∏≠‡∏á",
                tags: ["‡∏ß‡∏¥‡∏ß‡∏™‡∏ß‡∏¢", "‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô", "Dotonbori"]
            },
            {
                id: 4, name: "Yakiniku Like", city: "Kyoto", cuisine: "Yakiniku", style: "AlaCarte",
                price: 1500, alcohol: { type: "PayPerGlass", price: 550 },
                solo: 5, desc: "‡∏ü‡∏≤‡∏™‡∏ï‡πå‡∏ü‡∏π‡πâ‡∏î‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡πÄ‡∏ï‡∏≤‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß 100% ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏¥‡∏ô‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô",
                tags: ["Solo 100%", "‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î", "‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡∏™‡∏≤‡∏Ç‡∏≤"]
            },
            {
                id: 5, name: "Gyu-Kaku", city: "Osaka", cuisine: "Yakiniku", style: "Buffet",
                price: 3500, alcohol: { type: "Nomihodai", price: 1500 },
                solo: 4, desc: "‡πÄ‡∏ä‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÇ‡∏•‡∏Å ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥‡πÑ‡∏ß‡πâ‡πÉ‡∏à‡πÑ‡∏î‡πâ ‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏ö‡∏∏‡∏ü‡πÄ‡∏ü‡πà‡∏ï‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏±‡πà‡∏á‡πÅ‡∏¢‡∏Å",
                tags: ["Chain", "‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô", "‡∏ó‡∏±‡πà‡∏ß‡πÄ‡∏°‡∏∑‡∏≠‡∏á"]
            },

            // --- SUSHI (‡∏ã‡∏π‡∏ä‡∏¥) ---
            {
                id: 6, name: "Kura Sushi", city: "Osaka", cuisine: "Sushi", style: "AlaCarte",
                price: 2000, alcohol: { type: "PayPerGlass", price: 500 },
                solo: 5, desc: "‡∏ã‡∏π‡∏ä‡∏¥‡∏™‡∏≤‡∏¢‡∏û‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ 'Muten' (‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏ú‡∏á‡∏ä‡∏π‡∏£‡∏™) ‡∏°‡∏µ‡∏ö‡∏π‡∏ò‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß ‡∏ô‡∏±‡πà‡∏á‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏™‡∏ö‡∏≤‡∏¢‡∏°‡∏≤‡∏Å",
                tags: ["‡∏à‡∏≤‡∏ô‡∏•‡∏∞ 115¬•", "‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°", "‡∏ó‡∏±‡πà‡∏ß‡πÄ‡∏°‡∏∑‡∏≠‡∏á"]
            },
            {
                id: 7, name: "Musashi Sushi", city: "Kyoto", cuisine: "Sushi", style: "AlaCarte",
                price: 2800, alcohol: { type: "PayPerGlass", price: 600 },
                solo: 4, desc: "‡∏ã‡∏π‡∏ä‡∏¥‡∏™‡∏≤‡∏¢‡∏û‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡πÄ‡∏Å‡∏µ‡∏¢‡∏ß‡πÇ‡∏ï ‡πÄ‡∏ä‡∏ü‡∏õ‡∏±‡πâ‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏™‡∏î‡πÜ ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤‡∏£‡πâ‡∏≤‡∏ô 100 ‡πÄ‡∏¢‡∏ô",
                tags: ["Kyoto Station", "‡πÄ‡∏Ñ‡∏≤‡∏ô‡πå‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏¢‡∏≤‡∏ß", "‡∏õ‡∏±‡πâ‡∏ô‡∏™‡∏î"]
            },
            {
                id: 8, name: "Sushiro", city: "Osaka", cuisine: "Sushi", style: "AlaCarte",
                price: 1800, alcohol: { type: "PayPerGlass", price: 480 },
                solo: 5, desc: "‡∏£‡πâ‡∏≤‡∏ô‡∏ã‡∏π‡∏ä‡∏¥‡∏™‡∏≤‡∏¢‡∏û‡∏≤‡∏ô‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 1 ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏ö‡πà‡∏≠‡∏¢",
                tags: ["Chain", "‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏¢‡∏≠‡∏∞", "‡∏ó‡∏±‡πà‡∏ß‡πÄ‡∏°‡∏∑‡∏≠‡∏á"]
            },
            {
                id: 9, name: "Daiki Suisan", city: "Osaka", cuisine: "Sushi", style: "AlaCarte",
                price: 3000, alcohol: { type: "PayPerGlass", price: 550 },
                solo: 4, desc: "‡∏ã‡∏π‡∏ä‡∏¥‡∏™‡∏≤‡∏¢‡∏û‡∏≤‡∏ô‡πÄ‡∏Å‡∏£‡∏î‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°‡πÉ‡∏ô Dotonbori ‡∏õ‡∏•‡∏≤‡∏™‡∏î‡∏ä‡∏¥‡πâ‡∏ô‡πÉ‡∏´‡∏ç‡πà‡∏Å‡∏ß‡πà‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ",
                tags: ["Dotonbori", "‡∏õ‡∏•‡∏≤‡∏™‡∏î", "‡∏ô‡∏±‡∏Å‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡πÄ‡∏¢‡∏≠‡∏∞"]
            },

            // --- FRIED / KUSHIKATSU / TEMPURA ---
            {
                id: 10, name: "Kushikatsu Monogatari", city: "Osaka", cuisine: "Fried", style: "Buffet",
                price: 2500, alcohol: { type: "Nomihodai", price: 1500 },
                solo: 5, desc: "‡∏ö‡∏∏‡∏ü‡πÄ‡∏ü‡πà‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏ó‡∏≠‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏ö‡πÑ‡∏°‡πâ ‡∏°‡∏µ‡∏´‡∏°‡πâ‡∏≠‡∏ó‡∏≠‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡πÇ‡∏ï‡πä‡∏∞ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∏‡∏ö‡πÅ‡∏õ‡πâ‡∏á‡πÄ‡∏≠‡∏á ‡∏™‡∏ô‡∏∏‡∏Å‡∏°‡∏≤‡∏Å",
                tags: ["‡∏ó‡∏≠‡∏î‡πÄ‡∏≠‡∏á", "‡∏Ç‡∏≠‡∏á‡∏´‡∏ß‡∏≤‡∏ô", "Umeda"]
            },
            {
                id: 11, name: "Kushikatsu Daruma", city: "Osaka", cuisine: "Fried", style: "AlaCarte",
                price: 2200, alcohol: { type: "PayPerGlass", price: 500 },
                solo: 4, desc: "‡∏£‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏•‡∏∏‡∏á‡πÇ‡∏Å‡∏£‡∏ò‡πÉ‡∏ô‡∏ï‡∏≥‡∏ô‡∏≤‡∏ô ‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏£‡∏™‡πÄ‡∏î‡πá‡∏î (‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏ó)",
                tags: ["Landmark", "Dotonbori", "‡∏Å‡∏£‡∏≠‡∏ö‡∏≠‡∏£‡πà‡∏≠‡∏¢"]
            },
            {
                id: 12, name: "Tempura Makino", city: "Kyoto", cuisine: "Fried", style: "AlaCarte",
                price: 1800, alcohol: { type: "PayPerGlass", price: 600 },
                solo: 4, desc: "‡πÄ‡∏ó‡∏°‡∏õ‡∏∏‡∏£‡∏∞‡∏ó‡∏≠‡∏î‡∏™‡∏î‡∏ó‡∏µ‡∏•‡∏∞‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏≤‡∏ô‡πå‡πÄ‡∏ï‡∏≠‡∏£‡πå ‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ô‡∏µ‡πâ",
                tags: ["Teramachi", "‡∏ó‡∏≠‡∏î‡∏™‡∏î", "‡πÑ‡∏Ç‡πà‡πÄ‡∏ó‡∏°‡∏õ‡∏∏‡∏£‡∏∞"]
            },
            {
                id: 13, name: "Miyako Yasai Kamo", city: "Kyoto", cuisine: "Fried", style: "Buffet",
                price: 1100, alcohol: { type: "PayPerGlass", price: 500 },
                solo: 4, desc: "‡∏ö‡∏∏‡∏ü‡πÄ‡∏ü‡πà‡∏ï‡πå‡∏ú‡∏±‡∏Å‡πÅ‡∏•‡∏∞ Obanzai (‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏Å‡∏µ‡∏¢‡∏ß‡πÇ‡∏ï) ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å‡∏°‡∏≤‡∏Å ‡πÄ‡∏ô‡πâ‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û",
                tags: ["‡∏ú‡∏±‡∏Å‡∏™‡∏î", "‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å", "Shijo"]
            },

            // --- RAMEN & OTHERS ---
            {
                id: 14, name: "Ichiran Ramen", city: "Osaka", cuisine: "Ramen", style: "AlaCarte",
                price: 1200, alcohol: { type: "PayPerGlass", price: 580 },
                solo: 5, desc: "‡∏£‡∏≤‡πÄ‡∏°‡∏á‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö ‡∏Ñ‡∏≠‡∏Å‡∏Å‡∏±‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß ‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡∏Å‡∏±‡∏ö‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥‡∏ã‡∏∏‡∏õ‡∏Å‡∏£‡∏∞‡∏î‡∏π‡∏Å‡∏´‡∏°‡∏π‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô",
                tags: ["Dotonbori", "‡πÄ‡∏õ‡∏¥‡∏î 24 ‡∏ä‡∏°", "Solo Legend"]
            },
            {
                id: 15, name: "Tenkaippin", city: "Kyoto", cuisine: "Ramen", style: "AlaCarte",
                price: 1000, alcohol: { type: "PayPerGlass", price: 500 },
                solo: 4, desc: "‡∏£‡∏≤‡πÄ‡∏°‡∏á‡∏ã‡∏∏‡∏õ‡πÑ‡∏Å‡πà‡∏Ç‡πâ‡∏ô‡∏Ñ‡∏•‡∏±‡πà‡∏Å (Kotteri) ‡∏ï‡πâ‡∏ô‡∏ï‡∏≥‡∏£‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡πÄ‡∏Å‡∏µ‡∏¢‡∏ß‡πÇ‡∏ï",
                tags: ["Local Favorite", "‡∏ã‡∏∏‡∏õ‡∏Ç‡πâ‡∏ô", "‡∏ó‡∏±‡πà‡∏ß‡πÄ‡∏°‡∏∑‡∏≠‡∏á"]
            },
            {
                id: 16, name: "Matsuya / Sukiya", city: "Osaka", cuisine: "Rice", style: "AlaCarte",
                price: 700, alcohol: { type: "PayPerGlass", price: 350 },
                solo: 5, desc: "‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠ 24 ‡∏ä‡∏°. ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏™‡∏∏‡∏î‡πÜ ‡∏™‡∏±‡πà‡∏á‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡∏π‡πâ",
                tags: ["‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î", "24 ‡∏ä‡∏°", "‡∏ó‡∏±‡πà‡∏ß‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô"]
            },
            {
                id: 17, name: "Isomaru Suisan", city: "Osaka", cuisine: "Izakaya", style: "AlaCarte",
                price: 3000, alcohol: { type: "Nomihodai", price: 0 }, // Often included in sets, or cheap drinks
                solo: 4, desc: "‡∏£‡πâ‡∏≤‡∏ô‡∏ã‡∏µ‡∏ü‡∏π‡πâ‡∏î‡∏õ‡∏¥‡πâ‡∏á‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏¥‡∏î 24 ‡∏ä‡∏°. ‡∏°‡∏±‡∏ô‡∏õ‡∏π‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏î‡∏≠‡∏∞‡πÄ‡∏ö‡∏™‡∏ó‡πå ‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏Ñ‡∏£‡∏∂‡∏Å‡∏Ñ‡∏£‡∏∑‡πâ‡∏ô",
                tags: ["‡∏°‡∏±‡∏ô‡∏õ‡∏π‡∏¢‡πà‡∏≤‡∏á", "24 ‡∏ä‡∏°", "Dotonbori"]
            }
        ];

        const THB_RATE = 0.20;
        let chartInstance = null;

        // --- CORE LOGIC ---
        function init() {
            initChart();
            applyFilters();
        }

        function getFilterState() {
            return {
                city: document.querySelector('input[name="city"]:checked').value,
                style: document.getElementById('filter-style').value,
                cuisine: document.getElementById('filter-cuisine').value,
                alcohol: document.getElementById('filter-alcohol').value,
                sort: document.getElementById('sort-price').value
            };
        }

        function applyFilters() {
            const filters = getFilterState();

            let filtered = restaurants.filter(r => {
                const matchCity = filters.city === 'all' || r.city === filters.city;
                const matchStyle = filters.style === 'all' || r.style === filters.style;
                const matchCuisine = filters.cuisine === 'all' || r.cuisine === filters.cuisine;

                let matchAlcohol = true;
                if (filters.alcohol === 'Nomihodai') matchAlcohol = r.alcohol.type === 'Nomihodai';
                if (filters.alcohol === 'PayPerGlass') matchAlcohol = r.alcohol.type === 'PayPerGlass';

                return matchCity && matchStyle && matchCuisine && matchAlcohol;
            });

            // Sorting
            filtered.sort((a, b) => filters.sort === 'low' ? a.price - b.price : b.price - a.price);

            renderGrid(filtered);
            updateChart(filtered);
        }

        function renderGrid(data) {
            const container = document.getElementById('grid-container');
            const countDisplay = document.getElementById('display-count');

            countDisplay.innerText = data.length;
            container.innerHTML = '';

            if (data.length === 0) {
                container.innerHTML = `
                    <div class="col-span-full text-center py-12 bg-white rounded-xl border border-dashed border-slate-300">
                        <div class="text-4xl mb-4">üòî</div>
                        <h3 class="text-lg font-medium text-slate-900">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h3>
                        <p class="text-slate-500">‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô</p>
                    </div>
                `;
                return;
            }

            data.forEach(item => {
                const priceTHB = Math.round(item.price * THB_RATE).toLocaleString();
                const priceYen = item.price.toLocaleString();
                const alcPriceTHB = Math.round(item.alcohol.price * THB_RATE).toLocaleString();

                // Badges
                const styleBadge = item.style === 'Buffet'
                    ? `<span class="badge bg-red-100 text-red-700 border border-red-200">Buffet</span>`
                    : `<span class="badge bg-emerald-100 text-emerald-700 border border-emerald-200">A La Carte</span>`;

                const alcBadge = item.alcohol.type === 'Nomihodai'
                    ? `<span class="badge bg-blue-100 text-blue-700 border border-blue-200">üç∫ ‡∏ö‡∏∏‡∏ü‡πÄ‡∏ü‡πà‡∏ï‡πå‡πÄ‡∏Å‡πä‡∏Å‡∏Æ‡∏ß‡∏¢</span>`
                    : `<span class="badge bg-slate-100 text-slate-600 border border-slate-200">ü•É ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏¢‡∏Å</span>`;

                const card = document.createElement('div');
                card.className = "bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col card-hover";
                card.innerHTML = `
                    <div class="p-5 flex-grow">
                        <div class="flex justify-between items-start mb-2">
                            <div>
                                <h3 class="font-bold text-lg text-slate-800 leading-tight">${item.name}</h3>
                                <div class="text-xs text-slate-500 mt-1 flex items-center gap-1">
                                    <span>üìç ${item.city}</span> ‚Ä¢ <span>${item.cuisine}</span>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-xl font-black text-indigo-600">‡∏ø${priceTHB}</div>
                                <div class="text-xs text-slate-400">¬•${priceYen}</div>
                            </div>
                        </div>

                        <div class="flex flex-wrap gap-2 mb-4">
                            ${styleBadge}
                            ${alcBadge}
                        </div>

                        <p class="text-sm text-slate-600 mb-4 leading-relaxed">${item.desc}</p>

                        <div class="flex flex-wrap gap-1.5 mt-auto">
                            ${item.tags.map(t => `<span class="px-2 py-0.5 bg-slate-50 text-slate-500 text-[10px] rounded border border-slate-100">${t}</span>`).join('')}
                        </div>
                    </div>
                    <div class="bg-slate-50 px-5 py-3 border-t border-slate-100 flex justify-between items-center text-xs">
                        <div class="flex items-center text-yellow-500 font-medium">
                            ${'‚òÖ'.repeat(item.solo)}<span class="text-slate-300">${'‚òÖ'.repeat(5 - item.solo)}</span>
                            <span class="ml-1 text-slate-500">Solo Score</span>
                        </div>
                        <div class="text-slate-500">
                            ${item.alcohol.type === 'Nomihodai'
                        ? `<span class="text-blue-600 font-semibold">+‡∏î‡∏∑‡πà‡∏°‡πÑ‡∏°‡πà‡∏≠‡∏±‡πâ‡∏ô ~‡∏ø${alcPriceTHB}</span>`
                        : `‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏° ~‡∏ø${alcPriceTHB}`}
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // --- CHART ---
        function initChart() {
            const ctx = document.getElementById('priceChart').getContext('2d');
            chartInstance = new Chart(ctx, {
                type: 'bar',
                data: { labels: [], datasets: [] },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { beginAtZero: true, grid: { display: true, color: '#f1f5f9' } },
                        x: { grid: { display: false } }
                    }
                }
            });
        }

        function updateChart(data) {
            const categories = ['Yakiniku', 'Sushi', 'Fried', 'Ramen'];
            const avgData = categories.map(cat => {
                const subset = data.filter(d => d.cuisine === cat);
                if (!subset.length) return 0;
                const total = subset.reduce((sum, item) => sum + (item.price * THB_RATE), 0);
                return Math.round(total / subset.length);
            });

            chartInstance.data = {
                labels: ['‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á', '‡∏ã‡∏π‡∏ä‡∏¥', '‡∏Ç‡∏≠‡∏á‡∏ó‡∏≠‡∏î', '‡∏£‡∏≤‡πÄ‡∏°‡∏á'],
                datasets: [{
                    label: '‡∏ö‡∏≤‡∏ó (‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢)',
                    data: avgData,
                    backgroundColor: ['#f87171', '#60a5fa', '#fbbf24', '#a78bfa'],
                    borderRadius: 4,
                    barThickness: 30
                }]
            };
            chartInstance.update();
        }

        window.onload = init;
    </script>
</body>

</html>